"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[773],{244:(t,e,n)=>{var a=n(306),i=n(496),r=n.n(i),s=n(527),o=n(296),d=n.n(o);var l={};l.create=function(t,e,n){return a={x:t/n,y:e},[r().createSnapGrid(a)];var a};const c=l;var g={},p={x:0,y:0},u=null;g.resource=function(t){r().isSet(t)||(r()(t).dropzone({listeners:{dragenter:function(t){t.target.classList.add("droppable")},dragleave:function(t){t.target.classList.remove("droppable")},drop:function(t){var e=t.target,n=t.relatedTarget,a={id:parseInt(n.dataset.id),user_id:parseInt(n.dataset.user),start_time:parseInt(n.dataset.start),end_time:parseInt(n.dataset.end),resource_id:parseInt(e.dataset.id)},i=Math.round((n.getBoundingClientRect().left-e.getBoundingClientRect().left)/e.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+HYDROFON.Segel.component.data.timestamps.start),r=a.end_time-(a.start_time-i);a.start_time=i,a.end_time=r;var s=document.createElement("div");s.classList.add("progress"),n.appendChild(s),HYDROFON.Segel.component.call(t.dragEvent.altKey?"createBooking":"updateBooking",a),n.classList.remove("droppable"),p={x:0,y:0}}}}),r()(t).on("doubletap",(function(t){if(t.target.classList.contains("segel-resource")||t.target.classList.contains("segel-bookings")){var e=t.target.classList.contains("segel-resource")?t.target:t.target.parentNode,n=Math.round(t.offsetX/e.clientWidth*HYDROFON.Segel.component.data.timestamps.duration),a=Math.round(HYDROFON.Segel.component.data.timestamps.duration/HYDROFON.Segel.component.data.steps),i=n+HYDROFON.Segel.component.data.timestamps.start,r=i+2*a;HYDROFON.Segel.component.call("createBooking",{resource_id:parseInt(e.dataset.id),start_time:i,end_time:r})}})))},g.booking=function(t){!r().isSet(t)&&t.classList.contains("editable")?(r()(t).draggable({listeners:{start:function(t){t.altKey&&(u=t.target.cloneNode(!1),t.target.parentNode.appendChild(u)),t.target.classList.add("is-dragging")},move:function(t){p.x+=t.dx,p.y+=t.dy,t.target.style.transform="translate(".concat(p.x,"px, ").concat(p.y,"px)")},end:function(t){t.target.classList.remove("is-dragging"),u&&(t.altKey?HYDROFON.Segel.interactions.booking(u):u.parentNode.removeChild(u),u=null)}},modifiers:[r().modifiers.restrict({restriction:".segel-resources"}),r().modifiers.snap({targets:HYDROFON.Segel.grid,offset:"startCoords"})]}),r()(t).resizable({edges:{top:!1,bottom:!1,left:".segel-resize-handle__left",right:".segel-resize-handle__right"},listeners:{start:function(t){t.target.classList.add("is-resizing")},move:function(t){var e=t.target.dataset,n=e.x,a=e.y;n=(parseFloat(n)||0)+t.deltaRect.left,a=(parseFloat(a)||0)+t.deltaRect.top,Object.assign(t.target.style,{width:"".concat(t.rect.width,"px"),height:"".concat(t.rect.height,"px"),transform:"translate(".concat(n,"px, ").concat(a,"px)")}),Object.assign(t.target.dataset,{x:n,y:a})},end:function(t){var e=t.target,n=e.parentNode,a=e.dataset.x;a=parseFloat(a)||0;var i={id:parseInt(e.dataset.id),user_id:parseInt(e.dataset.user),start_time:parseInt(e.dataset.start),end_time:parseInt(e.dataset.end),resource_id:parseInt(n.dataset.id)},r=Math.round((e.getBoundingClientRect().left-n.getBoundingClientRect().left)/n.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+HYDROFON.Segel.component.data.timestamps.start),s=Math.round(e.getBoundingClientRect().width/n.clientWidth*HYDROFON.Segel.component.data.timestamps.duration+r);i.start_time=r,i.end_time=s;var o=document.createElement("div");o.classList.add("progress"),e.appendChild(o),HYDROFON.Segel.component.call("updateBooking",i),t.target.classList.remove("is-resizing")}},modifiers:[r().modifiers.restrict({restriction:".segel-resources"}),r().modifiers.restrictSize(HYDROFON.Segel.size),r().modifiers.snap({targets:HYDROFON.Segel.grid,offset:"startCoords"})]}),r()(t).on("doubletap",(function(t){HYDROFON.Segel.component.call("deleteBooking",{id:parseInt(t.target.dataset.id)})}))):t.classList.contains("editable")||r()(t).unset()};const m=g;function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}HYDROFON.Segel={_component:null,_element:null,initialized:!1,grid:null,size:null,interactions:m,set component(t){this._component=t,this._element=t.el,this.calculateGrid(),this.initialized=!0},get component(){return this._component},get element(){return this._element},set resources(t){HYDROFON.Segel.component.call("setResources",t)},set expanded(t){this._debounceExpanded(t)},_debounceExpanded:d()((function(t){HYDROFON.Segel.component.call("setExpanded",t)}),1e3),calculateGrid:function(){this.grid=c.create(this.element.clientWidth,41,this.component.data.steps),this.size={min:{width:this.element.clientWidth/this.component.data.steps,height:1},max:{width:this.element.clientWidth,height:41}}},handleResize:function(){this.calculateGrid();var t,e=f(this.element.querySelectorAll(".segel-booking"));try{for(e.s();!(t=e.n()).done;){var n=t.value;if(r().isSet(n)){var a=r()(n).draggable(),i=r()(n).resizable();a.modifiers[1].options.targets=this.grid,i.modifiers[2].options.targets=this.grid,i.modifiers[1].options.min=this.size.min,i.modifiers[1].options.max=this.size.max}}}catch(t){e.e(t)}finally{e.f()}}},window.Alpine=a.Z,a.Z.start(),window.interact=r(),window.flatpickr=s.Z},580:()=>{}},t=>{var e=e=>t(t.s=e);t.O(0,[170,898],(()=>(e(244),e(580))));t.O()}]);